[gcode_macro _set_retraction]
gcode:
  {% set MATERIAL = params.MATERIAL|default("PLA")|string %}

  {% if MATERIAL == "PETG" %}
    SET_RETRACTION RETRACT_LENGTH=2.5
  {% else %}
    SET_RETRACTION RETRACT_LENGTH=1
  {% endif %}